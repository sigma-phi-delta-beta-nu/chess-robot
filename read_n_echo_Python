import serial
import time

MAX_BUFF_LEN = 255
# port = serial.Serial("COM3", 115200, timeout=1)
port = serial.Serial("/dev/cu.usbserial-0001", 115200, timeout=1)


def read_serial(num_char=1):
    string = port.read(num_char)
    return string.decode()


def write_serial(cmd):
    cmd = cmd + '\n'
    port.write(cmd.encode())

def echo_test():
    cmd = input("enter command here: ")
    if cmd:
        write_serial(cmd)

    string = read_serial(MAX_BUFF_LEN)
    if(len(string)):
        print(string)

def close_claw():
    # this will close the claw to pick up the piece
    # move servo soem distance
    # serial print the task is done
    write_serial("close")

    # wait until the C++ code is done doing stuff and read done



    # This should read done
    string1 = read_serial(MAX_BUFF_LEN)
    if(len(string1)):
            print(string1)


def open_claw():
    # this will open the cLAW
    # move the ervo some distance
    # serial print done
    pass

while(1):
    close_claw()
